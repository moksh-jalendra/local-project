/* remixer.css - Purple Theme & Timeline */

:root {
    --bg-dark: #111;
    --brand-purple: #9d00ff;
    --brand-cyan: #00e5ff;
    --track-bg: #1e1e1e;
    --clip-bg: #3d2c4d;
    --playhead-color: #ff3366;
    --panel-height: 20vh !important; 
}

/* --- TIMELINE AREA --- */
.main-keyboard-area {
    display: flex;
    flex-direction: column;
    background: #0a0a0a;
    overflow-y: auto;
    overflow-x: hidden;
    position: relative;
    padding: 0;
}

/* Ruler */
.timeline-ruler {
    height: 30px;
    background: #151515;
    border-bottom: 1px solid #333;
    display: flex;
    padding-left: 120px; /* Offset for track headers */
    position: sticky;
    top: 0;
    z-index: 5;
}
.ruler-mark {
    flex: 1; border-left: 1px solid #333;
    color: #555; font-size: 0.7em; padding-left: 5px;
    pointer-events: none;
}

/* Tracks Container */
#tracks-container {
    flex-grow: 1;
    padding-bottom: 50px;
    position: relative;
    min-height: 300px;
}

/* Individual Track */
.track-row {
    height: 90px;
    background: var(--track-bg);
    border-bottom: 1px solid #000;
    display: flex;
    position: relative;
}

/* Track Header (Left Controls) */
.track-header {
    width: 120px;
    background: #252525;
    border-right: 2px solid #000;
    padding: 5px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    z-index: 4;
}
.track-name { font-size: 0.8em; color: #ccc; font-weight: bold; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.track-controls { display: flex; gap: 5px; }
.track-btn {
    background: #333; border: 1px solid #555; color: #888;
    font-size: 0.6em; cursor: pointer; padding: 2px 5px; border-radius: 3px;
    flex: 1;
}
.track-btn.active.mute { background: #ff3366; color: white; border-color: #ff3366; }
.track-btn.active.solo { background: #ffd700; color: black; border-color: #ffd700; }

/* Track Lane (Where clips go) */
.track-lane {
    flex-grow: 1;
    position: relative;
    background-image: linear-gradient(90deg, #222 1px, transparent 1px);
    background-size: 50px 100%; /* Grid lines */
}

/* Audio Clip */
.audio-clip {
    position: absolute;
    top: 5px; bottom: 5px;
    background: var(--clip-bg);
    border: 1px solid var(--brand-purple);
    border-radius: 4px;
    cursor: grab;
    overflow: hidden;
    display: flex; align-items: center; justify-content: center;
    color: #ccc; font-size: 0.7em;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
}
.audio-clip:active { cursor: grabbing; border-color: #fff; }
.audio-clip .waveform { opacity: 0.3; width: 100%; height: 100%; position: absolute; pointer-events: none; }

/* Playhead */
.playhead {
    position: absolute;
    top: 30px; bottom: 0; left: 120px; /* Start after header */
    width: 2px;
    background: var(--playhead-color);
    z-index: 10;
    pointer-events: none;
    box-shadow: 0 0 10px var(--playhead-color);
    transform: translateX(0);
}

/* Modal Styling */
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.8); z-index: 2000;
    display: flex; justify-content: center; align-items: center;
}
.modal-box {
    width: 90%; max-width: 500px; height: 70vh;
    background: #1a1a1a; border: 1px solid var(--brand-purple);
    border-radius: 8px; display: flex; flex-direction: column;
}
.modal-header { padding: 15px; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; }
.modal-tabs { display: flex; background: #111; }
.tab-btn { flex: 1; background: none; border: none; padding: 10px; color: #666; cursor: pointer; border-bottom: 2px solid transparent; }
.tab-btn.active { color: var(--brand-cyan); border-bottom-color: var(--brand-cyan); }
.modal-content { flex-grow: 1; overflow-y: auto; padding: 10px; }

.lib-item {
    background: #252525; padding: 10px; margin-bottom: 5px;
    border-radius: 4px; cursor: grab; display: flex; justify-content: space-between;
}
.lib-item:hover { background: #333; }
.lib-item span { pointer-events: none; } /* Important for drag */